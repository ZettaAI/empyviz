{
    "@type": "lightning_train",
    "ckpt_path": null,
    "regime": {
        "@type": "NaiveSupervised",
        "lr": 0.0004,
        "model": {
            "@type": "load_weights_file",
            "model": {
                "@type": "ArtificerySpec",
                "spec": {
                    "type": "convblock",
                    "arch_desc": {
                        "fms": [
                            1,
                            32,
                            32,
                            32,
                            32,
                            1
                        ],
                        "skips": {
                            "1": 4
                        },
                        "k": 5
                    }
                }
            },
            "ckpt_path": null,
            "component_names": [
                "bW9kZWw="
            ]
        }
    },
    "trainer": {
        "@type": "ZettaDefaultTrainer",
        "accelerator": "gpu",
        "devices": 1,
        "max_epochs": 1,
        "default_root_dir": "gs://sergiy_exp/training_artifacts",
        "experiment_name": "mimic_encodings",
        "experiment_version": "demo_x20",
        "log_every_n_steps": 100,
        "val_check_interval": 100,
        "checkpointing_kwargs": {
            "update_every_n_secs": 60,
            "backup_every_n_secs": 900
        },
        "profiler": "simple"
    },
    "train_dataloader": {
        "@type": "TorchDataLoader",
        "batch_size": 1,
        "shuffle": true,
        "num_workers": 16,
        "dataset": {
            "@type": "LayerDataset",
            "layer": {
                "@type": "build_layer_set",
                "layers": {
                    "data_in": {
                        "@type": "build_cv_layer",
                        "path": "https://storage.googleapis.com/fafb_v15_aligned/v0/img/img",
                        "read_postprocs": [
                            {
                                "@type": "rearrange",
                                "@mode": "partial",
                                "pattern": "c x y 1 -\u003e c x y"
                            },
                            {
                                "@type": "divide",
                                "@mode": "partial",
                                "value": 256.0
                            },
                            {
                                "@type": "add",
                                "@mode": "partial",
                                "value": -0.5
                            }
                        ]
                    },
                    "target": {
                        "@type": "build_cv_layer",
                        "path": "https://storage.googleapis.com/fafb_v15_aligned/v0/experiments/emb_fp32/baseline_downs_emb_m2_m4_x0",
                        "read_postprocs": [
                            {
                                "@type": "rearrange",
                                "@mode": "partial",
                                "pattern": "c x y 1 -\u003e c x y"
                            }
                        ]
                    }
                }
            },
            "sample_indexer": {
                "@type": "VolumetricStepIndexer",
                "resolution": [
                    64,
                    64,
                    40
                ],
                "desired_resolution": [
                    64,
                    64,
                    40
                ],
                "chunk_size": [
                    1024,
                    1024,
                    1
                ],
                "step_size": [
                    512,
                    512,
                    1
                ],
                "bcube": {
                    "@type": "BoundingCube",
                    "start_coord": [
                        80000,
                        30000,
                        2000
                    ],
                    "end_coord": [
                        230000,
                        80000,
                        2099
                    ],
                    "resolution": [
                        4,
                        4,
                        40
                    ]
                }
            }
        }
    },
    "val_dataloader": {
        "@type": "TorchDataLoader",
        "batch_size": 1,
        "shuffle": false,
        "num_workers": 16,
        "dataset": {
            "@type": "LayerDataset",
            "layer": {
                "@type": "build_layer_set",
                "layers": {
                    "data_in": {
                        "@type": "build_cv_layer",
                        "path": "https://storage.googleapis.com/fafb_v15_aligned/v0/img/img",
                        "read_postprocs": [
                            {
                                "@type": "rearrange",
                                "@mode": "partial",
                                "pattern": "c x y 1 -\u003e c x y"
                            },
                            {
                                "@type": "divide",
                                "@mode": "partial",
                                "value": 256.0
                            },
                            {
                                "@type": "add",
                                "@mode": "partial",
                                "value": -0.5
                            }
                        ]
                    },
                    "target": {
                        "@type": "build_cv_layer",
                        "path": "https://storage.googleapis.com/fafb_v15_aligned/v0/experiments/emb_fp32/baseline_downs_emb_m2_m4_x0",
                        "read_postprocs": [
                            {
                                "@type": "rearrange",
                                "@mode": "partial",
                                "pattern": "c x y 1 -\u003e c x y"
                            }
                        ]
                    }
                }
            },
            "sample_indexer": {
                "@type": "VolumetricStepIndexer",
                "resolution": [
                    64,
                    64,
                    40
                ],
                "desired_resolution": [
                    64,
                    64,
                    40
                ],
                "chunk_size": [
                    1024,
                    1024,
                    1
                ],
                "step_size": [
                    512,
                    512,
                    1
                ],
                "bcube": {
                    "@type": "BoundingCube",
                    "start_coord": [
                        80000,
                        30000,
                        2099
                    ],
                    "end_coord": [
                        230000,
                        80000,
                        2100
                    ],
                    "resolution": [
                        4,
                        4,
                        40
                    ]
                }
            }
        }
    }
}
